{% extends 'base.html' %}
{% load staticfiles %}

{% block extra_js %}
  <script src="/static/js/route.js" type="text/javascript"></script>
  <script src="/static/js/route_utils.js" type="text/javascript"></script>
  <script src="/static/js/plan_edit.js" type="text/javascript"></script>
  <link rel="stylesheet" href="/static/css/trips.css">

  <script src="/static/js/packing_list.js" type="text/javascript"></script>
  <link rel="stylesheet" href="/static/css/packing.css" />
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.1/moment.js"></script>

  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />

{% endblock %}

{% block content %}
  <div class="container">
    <div id="plan-pub-id" style="display:none;">{{ plan.pub_id }}</div>
    <div class="row">
      <h2>
        <div id="trip-title">{{ plan.route.name }}</div>
      </h2>

      <!-- https://getbootstrap.com/docs/4.0/components/navs/#tabs-with-dropdowns -->
      <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item dark">
          <a class="nav-link active" id="route-tab" data-toggle="tab" href="#route" role="tab" aria-controls="route" aria-selected="true">
            Route <img class="trip-plan-icon" src="/static/img/icons/icons8-world-map-512.png">
          </a>
        </li>
        <li class="nav-item dark">
          <a class="nav-link" id="packing-tab" data-toggle="tab" href="#packing" role="tab" aria-controls="packing" aria-selected="false">
            Packing ({{ plan.packing_list.weight }}) <img class="trip-plan-icon" src="/static/img/icons/icons8-backpack-512.png">
          </a>
        </li>
        <li class="nav-item dark">
          <a class="nav-link" id="time-tab" data-toggle="tab" href="#time" role="tab" aria-controls="time" aria-selected="false">
            Date(s) & Weather <img class="trip-plan-icon" src="/static/img/icons/icons8-realtime-512.png">
          </a>
        </li>
        <li class="nav-item dark">
          <a class="nav-link" id="partners-tab" data-toggle="tab" href="#partners" role="tab" aria-controls="partners" aria-selected="false">
            Partner(s) <img class="trip-plan-icon" src="/static/img/icons/icons8-male-user-512.png">
          </a>
        </li>
        <li class="nav-item dark">
          <i class="fa fa-times-circle fa-2x" id="remove" aria-hidden="true"></i>
        </li>
      </ul>
    </div>
    <div class="row">
      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="route" role="tabpanel" aria-labelledby="route-tab">
          <div id="map" style="top:0;"></div>
          <script>
            function initMap() {
              show_route("{{ plan.route_pub_id }}");
            }
          </script>
          <script src="https://maps.googleapis.com/maps/api/js?key={{ google_maps_api_key }}&callback=initMap" async defer></script>
        </div>
        <div class="tab-pane fade" id="packing" role="tabpanel" aria-labelledby="packing-tab">
          <div class="container">
            {% include "packing/_edit_row.html" with packing_list=plan.packing_list hide_name="true" %}
          </div>
        </div>
        <div class="tab-pane fade show" id="time" role="tabpanel" aria-labelledby="time-tab">
          <div class="container">
            {% include "trips/plan/_date_row.html" %}
          </div>
        </div>
        <div class="tab-pane fade" id="partners" role="tabpanel" aria-labelledby="partners-tab">
          <div class="container">
            {% include "trips/plan/_attendees_row.html" %}
          </div>
        </div>
      </div>
    </div>
  </div>

{% endblock %}

